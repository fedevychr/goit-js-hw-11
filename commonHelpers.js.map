{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst API_URL = 'https://pixabay.com/api/';\n\nconst alertError = {\n  message:\n    'Sorry, there are no images matching your search query. Please try again!',\n  color: '#EF4040',\n  position: 'topRight',\n  icon: 'icon-octagon',\n  iconText: '',\n  timeout: 5000,\n  titleColor: '#fff',\n  messageColor: '#fff',\n  iconColor: '#fff',\n};\nconst paramsOptions = {\n  key: '42319756-1866d229574eee1c1aa4e15c2',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 9,\n};\n\nconst findPhotoForm = document.querySelector('.form');\nconst galleryList = document.querySelector('ul.gallery');\nconst loader = document.querySelector('.loader');\nconst showMoreButton = document.querySelector('#show-more');\n\nlet loadedPage = 1,\n  searchQuery = '';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  sourceAttr: 'data-source',\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst fetchPhoto = (value, page) => {\n  const searchParams = new URLSearchParams({\n    ...paramsOptions,\n    q: value,\n    page,\n  });\n  return fetch(`${API_URL}?${searchParams}`).then(response => {\n    if (!response.ok) throw new Error(response.status);\n    return response.json();\n  });\n};\n\nconst addPhotos = photos => {\n  galleryList.insertAdjacentHTML(\n    'beforeend',\n    photos\n      .map(photo => {\n        return `<li class=\"gallery-item\">\n                  <a class=\"gallery-link\" href=\"${photo.largeImageURL}\" data-source=\"${photo.largeImageURL}\">\n                    <img class=\"gallery-image\" src=\"${photo.webformatURL}\"  alt=\"${photo.tags}\"/>\n                  </a>\n                </li>`;\n      })\n      .join('')\n  );\n  lightbox.refresh();\n};\n\nconst handleSearchSubmit = event => {\n  event.preventDefault();\n  const searchText = event.target.elements.search.value.trim();\n  event.target.elements.search.value = '';\n\n  showMoreButton.classList.add('hidden');\n  loader.classList.remove('hidden');\n  galleryList.innerHTML = '';\n  loadedPage = 1;\n\n  fetchPhoto(searchText, loadedPage)\n    .then(response => {\n      const photos = response.hits;\n      if (photos.length) {\n        addPhotos(photos);\n        showMoreButton.classList.remove('hidden');\n        loadedPage++;\n        searchQuery = searchText;\n      } else {\n        iziToast.show(alertError);\n      }\n    })\n    .catch(error => iziToast.show({ ...alertError, message: error }))\n    .finally(() => loader.classList.add('hidden'));\n};\n\nconst handleSearchMore = () => {\n  loader.classList.remove('hidden');\n  showMoreButton.classList.add('hidden');\n\n  fetchPhoto(searchQuery, loadedPage)\n    .then(photos => {\n      addPhotos(photos.hits);\n      loadedPage++;\n    })\n    .catch(() => iziToast.show(alertError))\n    .finally(() => {\n      loader.classList.add('hidden');\n      showMoreButton.classList.remove('hidden');\n    });\n};\n\nfindPhotoForm.addEventListener('submit', handleSearchSubmit);\nshowMoreButton.addEventListener('click', handleSearchMore);"],"names":["API_URL","alertError","paramsOptions","findPhotoForm","galleryList","loader","showMoreButton","loadedPage","searchQuery","lightbox","SimpleLightbox","fetchPhoto","value","page","searchParams","response","addPhotos","photos","photo","handleSearchSubmit","event","searchText","iziToast","error","handleSearchMore"],"mappings":"6vBAKA,MAAMA,EAAU,2BAEVC,EAAa,CACjB,QACE,2EACF,MAAO,UACP,SAAU,WACV,KAAM,eACN,SAAU,GACV,QAAS,IACT,WAAY,OACZ,aAAc,OACd,UAAW,MACb,EACMC,EAAgB,CACpB,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,CACZ,EAEMC,EAAgB,SAAS,cAAc,OAAO,EAC9CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAIC,EAAa,EACfC,EAAc,GAEhB,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,WAAY,cACZ,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAa,CAACC,EAAOC,IAAS,CAClC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,GAAGZ,EACH,EAAGU,EACH,KAAAC,CACJ,CAAG,EACD,OAAO,MAAM,GAAGb,CAAO,IAAIc,CAAY,EAAE,EAAE,KAAKC,GAAY,CAC1D,GAAI,CAACA,EAAS,GAAI,MAAM,IAAI,MAAMA,EAAS,MAAM,EACjD,OAAOA,EAAS,MACpB,CAAG,CACH,EAEMC,EAAYC,GAAU,CAC1Bb,EAAY,mBACV,YACAa,EACG,IAAIC,GACI;AAAA,kDACmCA,EAAM,aAAa,kBAAkBA,EAAM,aAAa;AAAA,sDACpDA,EAAM,YAAY,WAAWA,EAAM,IAAI;AAAA;AAAA,sBAGtF,EACA,KAAK,EAAE,CACd,EACET,EAAS,QAAO,CAClB,EAEMU,EAAqBC,GAAS,CAClCA,EAAM,eAAc,EACpB,MAAMC,EAAaD,EAAM,OAAO,SAAS,OAAO,MAAM,OACtDA,EAAM,OAAO,SAAS,OAAO,MAAQ,GAErCd,EAAe,UAAU,IAAI,QAAQ,EACrCD,EAAO,UAAU,OAAO,QAAQ,EAChCD,EAAY,UAAY,GACxBG,EAAa,EAEbI,EAAWU,EAAYd,CAAU,EAC9B,KAAKQ,GAAY,CAChB,MAAME,EAASF,EAAS,KACpBE,EAAO,QACTD,EAAUC,CAAM,EAChBX,EAAe,UAAU,OAAO,QAAQ,EACxCC,IACAC,EAAca,GAEdC,EAAS,KAAKrB,CAAU,CAEhC,CAAK,EACA,MAAMsB,GAASD,EAAS,KAAK,CAAE,GAAGrB,EAAY,QAASsB,CAAK,CAAE,CAAC,EAC/D,QAAQ,IAAMlB,EAAO,UAAU,IAAI,QAAQ,CAAC,CACjD,EAEMmB,EAAmB,IAAM,CAC7BnB,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAe,UAAU,IAAI,QAAQ,EAErCK,EAAWH,EAAaD,CAAU,EAC/B,KAAKU,GAAU,CACdD,EAAUC,EAAO,IAAI,EACrBV,GACN,CAAK,EACA,MAAM,IAAMe,EAAS,KAAKrB,CAAU,CAAC,EACrC,QAAQ,IAAM,CACbI,EAAO,UAAU,IAAI,QAAQ,EAC7BC,EAAe,UAAU,OAAO,QAAQ,CAC9C,CAAK,CACL,EAEAH,EAAc,iBAAiB,SAAUgB,CAAkB,EAC3Db,EAAe,iBAAiB,QAASkB,CAAgB"}